<!-- cd hugo-site && hugo server -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="{{ if .Description }}{{ .Description }}{{ else if .IsHome }}{{ .Site.Params.description }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}">
  <meta name="author" content="{{ .Site.Params.author }}">
  <link rel="canonical" href="{{ .Permalink }}">

  <!-- OpenGraph tags -->
  <meta property="og:title" content="{{ .Title }}">
  <meta property="og:description" content="{{ if .Description }}{{ .Description }}{{ else if .IsHome }}{{ .Site.Params.description }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}">
  <meta property="og:type" content="{{ if .IsHome }}website{{ else if eq .Type "posts" }}article{{ else }}website{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  {{ if .IsHome }}
  <meta property="og:image" content="{{ .Site.BaseURL }}images/share/home.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  {{ else if and .File .File.ContentBaseName }}
  <meta property="og:image" content="{{ .Site.BaseURL }}images/share/{{ .File.ContentBaseName }}.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  {{ end }}
  {{ if eq .Type "posts" }}
  <meta property="article:published_time" content="{{ .Date.Format "2006-01-02" }}">
  <meta property="article:author" content="{{ .Site.Params.author }}">
  {{ end }}

  <!-- Twitter Card tags -->
  <meta name="twitter:card" content="{{ if or .IsHome (and .File .File.ContentBaseName) }}summary_large_image{{ else }}summary{{ end }}">
  <meta name="twitter:title" content="{{ .Title }}">
  <meta name="twitter:description" content="{{ if .Description }}{{ .Description }}{{ else if .IsHome }}{{ .Site.Params.description }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}">
  {{ if .IsHome }}
  <meta name="twitter:image" content="{{ .Site.BaseURL }}images/share/home.png">
  {{ else if and .File .File.ContentBaseName }}
  <meta name="twitter:image" content="{{ .Site.BaseURL }}images/share/{{ .File.ContentBaseName }}.png">
  {{ end }}

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TR23NDH2MP"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-TR23NDH2MP');
  </script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="621725b9-29f5-45d4-a844-ccce88020346"></script>

  <!-- Shared CSS: fonts, variables, notebook header, blog helpers -->
  <link rel="stylesheet" href="/shared.css">

  <!-- Conditional CSS: notebook.css for homepage + list pages, main.css for blog posts -->
  {{ if or .IsHome (eq .Params.layout "notebook") }}
    <link rel="stylesheet" href="/notebook.css">
  {{ else }}
    <link rel="stylesheet" href="/main.css">
  {{ end }}

  <title>{{ .Title | default .Site.Title }}</title>
  <style>
    .captioned-image-container img {
      max-width: 100%;
      height: auto;
    }
  </style>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ .Site.Title }}",
    "url": "{{ .Site.BaseURL }}",
    "author": {
      "@type": "Person",
      "name": "{{ .Site.Params.author }}",
      "url": "{{ .Site.BaseURL }}"
    }
  }
  </script>

  {{ if .IsHome }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Maksym Sherman",
    "url": "{{ .Site.BaseURL }}",
    "jobTitle": "Data Consultant",
    "description": "I believe in great work, ambition, and obsessiveness. I seek to understand the world through better explanations."
  }
  </script>
  {{ end }}

  {{ if and (not .IsHome) (eq .Type "posts") }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": {{ .Title | jsonify }},
    "author": {
      "@type": "Person",
      "name": "{{ .Site.Params.author }}",
      "url": "{{ .Site.BaseURL }}"
    },
    {{ with .Params.date }}
    "datePublished": "{{ .Format "2006-01-02T15:04:05Z07:00" }}",
    {{ end }}
    {{ with .Params.description }}
    "description": {{ . | jsonify }},
    {{ else }}
    "description": {{ .Summary | plainify | truncate 160 | jsonify }},
    {{ end }}
    "url": "{{ .Permalink }}",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ .Permalink }}"
    }
  }
  </script>
  {{ end }}
</head>
<body>
  {{- block "main" . }}{{- end }}
</body>
</html>
